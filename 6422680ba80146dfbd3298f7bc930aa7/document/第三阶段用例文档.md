#用例文档



<!-- TOC -->

- [用例文档](#用例文档)
    - [0.文档版本记录](#0文档版本记录)
    - [1. 引言](#1-引言)
    - [2. 用例列表](#2-用例列表)
    - [3.用例图](#3用例图)
    - [4. 详细用例描述](#4-详细用例描述)
        - [21：发布会员卡充值优惠策略](#21发布会员卡充值优惠策略)
        - [22：修改会员卡优惠策略](#22修改会员卡优惠策略)
        - [23：设置退票策略](#23设置退票策略)
        - [24：修改退票策略](#24修改退票策略)
        - [25：影厅信息录入](#25影厅信息录入)
        - [26：影厅信息修改](#26影厅信息修改)
        - [27：影院角色的增删改查](#27影院角色的增删改查)
        - [28：用户退票](#28用户退票)
        - [29：查看历史充值记录](#29查看历史充值记录)
        - [30：查看历史消费记录](#30查看历史消费记录)
        - [31：赠送优惠券](#31赠送优惠券)

<!-- /TOC -->

##0.文档版本记录
| 修改人员 |   日期    |   修改原因   | 版本号 |
| :------: | :-------: | :----------: | :----: |
|  杨承峰  | 2019.5.10 | 草拟文档结构 |  V1.0  |
|   杨承峰   | 2019.6.17 | 修改文档+用例图       |        |
|          |           |              |        |



##1. 引言

- 1.1 目的
	
	本文档描述了影院管理系统第三阶段的用户需求

- 1.2 阅读说明

	用例描述的模板参考《软件开发的技术基础》



##2. 用例列表
| 参与者         | 用例                         |
| -------------- | ---------------------------- |
| 1.影院管理人员 | 21 发布会员卡充值优惠策略       |
|                | 22 修改会员卡充值优惠策略    |
|               |23设置用户退票策略           |
|                  |24修改用户退票策略            |
|                   |25影厅信息录入           |
|               |26修改影厅信息               |
|                  |27影院角色增删改查          |
|                   |31 赠送优惠券              |
| 2.观众         | 28 用户退票            |
|                | 29 查看历史充值记录      |
|                  | 30 查看历史消费记录          |


##3.用例图

![用例图](https://i.loli.net/2019/06/19/5d0a4e0f252ce95429.jpg)


##4. 详细用例描述

### 21：发布会员卡充值优惠策略

- 名称：发布会员卡充值优惠策略

- 创建者：杨承峰

- 创建日期： 2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者：影院管理人员

- 触发条件：影院管理人添加新的会员卡优惠策略

- 前置条件：1.影院管理人员身份得到识别和确认

- 后置条件：充值会员卡时可以享受新的折扣

- 优先级：高

- 正常流程：

  1.影院管理人员输入新的优惠策略中的满额（满1000送100的1000）和赠额（100）

  2.系统为该优惠策略指定编号

  3.重复1、2直到所有需添加优惠策略得到添加

- 扩展流程：

  1.优惠策略添加时，如果出现已有优惠策略和现在的满额重复（例如原本是满1000送40，现在想天际满1000送400）系统需要报错，提醒用户修改已有优惠策略

  2.优惠策略需要删除时，可以选择一个



- 特殊需求：

  1.充值时可以自动根据优惠策略中最大满额优惠策略来给予优惠。举例：若系统中存在满500送100和满1000送200两种优惠策略，用户充值时充1000元可以自动判断满了1000，所以赠送200增额




### 22：修改会员卡优惠策略

- 名称：修改会员卡优惠策略

- 创建者：杨承峰

- 最后一次更新者：杨承峰

- 创建日期：2019/5/10

- 最后更新日期：2019/6/17

- 参与者：影院管理人员

- 触发条件：影院管理人员修改已经存在的会员卡充值优惠策略

- 前置条件：1.会员卡优惠策略已经存在
            2.影院管理人员身份得到识别和确认

- 后置条件：充值会员卡时可以享受新的折扣

- 优先级：中

- 正常流程：
	1.影院管理人员选择一个已存在的优惠策略
	
	2.影院管理人员输入新的满额和增额
	
    3.该优惠策略得到修改

- 拓展流程：
	
	1.影院管理人员选择删除该优惠策略，优惠策略被删除

- 特殊需求：
	
	1.无



###23：设置退票策略

- 用例编号：23

- 名称：设置退票策略

- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者：影院管理人员

- 触发条件：影院管理人员添加一个新的退票策略

- 前置条件：1.影院管理人员身份得到识别和确认

- 后置条件：观众可以根据该策略来进行退票活动

- 优先级：高

- 正常流程：

    1. 影院管理人员选择添加退票策略
    
    2. 影院管理人员输入能否退票和价格折算等参数
    
    3. 系统添加新的退票策略

- 扩展流程：
  
	1. 添加一个退票策略后，退票默认使用最新添加的退票策略

- 特殊需求：无


### 24：修改退票策略

- 名称：修改退票策略

- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者：影院管理员

- 触发条件：影院管理人员选择修改一项已存在的退票策略

- 前置条件：
	
	1.影院管理人员权限得到确认

    2.退票策略已经存在

- 后置条件：用户可以根据新的退票策略退票

- 优先级：中

- 正常流程：

  1.影院管理人员选择一项已存在的退票策略

  2.影院管理人员输入新的退票策略参数并确认

- 扩展流程：

  1.管理人员撤销了退票策略的修改

- 特殊需求：

  无


### 25：影厅信息录入      

- 名称：影厅信息录入                                                          
- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者 ：影院管理人员

- 触发条件：影院管理人员添加新的影厅

- 前置条件：无

- 后置条件：新的影厅可以被使用于安排排片等

- 优先级：高

- 正常流程：

    - 1.影院管理员选择添加新的影厅
  
    - 2.管理员录入新的影厅信息：名称、座位、大小等


- 扩展流程：
  
    - 1.管理员撤销录入影厅时，已输入的信息被丢弃

- 特殊需求：
  
  - 无



### 26：影厅信息修改    

- 名称：影厅信息修改                                                          
- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者 ：影院管理人员

- 触发条件：影院管理人员修改已有的影厅的信息

- 前置条件：影厅已经存在

- 后置条件：影厅信息得到更新

- 优先级：中

- 正常流程：

    - 1.影院管理员选择已有影厅，并选择修改其信息
  
    - 2.管理员录入新的影厅信息：名称、座位、大小等


- 扩展流程：
  
    - 1.影厅已经得到排片：提示影厅已被使用，信息无法修改

- 特殊需求：
  
  - 无



### 27：影院角色的增删改查

- 名称：影院角色的增删改查                                                          
- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者 ：影院管理人员

- 触发条件：影院管理人员增删改查影院角色

- 前置条件：影院管理员权限得到确认

- 后置条件：新的角色拥有不同的权限

- 优先级：高

- 正常流程：

    - 1.影院管理员选择增加新的影院角色
  
    - 2.管理员录入新的账号信息：姓名、密码、权限

    - 3.管理员修改账户信息：姓名、密码、权限

    - 4.管理员查询已有的账号信息

    - 5.管理员删除已存在账号信息



- 扩展流程：
  
    - 1.不同的账号须有不同的权限，允许其对整个系统控制的程度

- 特殊需求：
  
  - 管理员的权限最高，员工可以查看但是不能

### 28：用户退票

- 名称：用户退票

- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者 ：用户

- 触发条件：用户选择退已付款的票

- 前置条件：用户已经支付了订单，但是票尚未使用

- 后置条件：用户所购买的票得到退款

- 优先级：高

- 正常流程：

    - 1.用户选择一张已购买的票
  
    - 2.用户选择退票
    
    - 3.系统判断此票是否使用或赠送新的优惠券，有则不能退款

    - 4.根据支付方式返还金额到银行卡或会员卡账户上



- 扩展流程：
  
    - 1.若购买此票使用了优惠券，则无法退票

- 特殊需求：
  
  - 退票需根据已有的退票策略

### 29：查看历史充值记录

- 名称：查看历史充值记录

- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者 ：用户

- 触发条件：用户选择查看充值记录

- 前置条件：用户拥有会员卡账户

- 后置条件：系统显示充值记录

- 优先级：中

- 正常流程：

    - 1.用户查看充值记录
  
    - 2.系统展示用户充值记录
    
    - 3.用户选择某一项充值记录查看详情




- 扩展流程：
  
    - 1.用户可以看到充值记录的赠额（满赠优惠策略的增额）

- 特殊需求：
  
  - 无

### 30：查看历史消费记录

- 名称：查看历史消费记录

- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者 ：用户

- 触发条件：用户选择查看消费记录

- 前置条件：用户曾经消费过

- 后置条件：系统显示消费记录

- 优先级：中

- 正常流程：

    - 1.用户查看消费记录
  
    - 2.系统展示用户消费记录
    
    - 3.用户选择某一项消费记录查看详情




- 扩展流程：
  
    - 1.用户可以看到消费记录消费方式（使用银行卡或者会员卡）

    - 2.用户可以查看单项消费记录是否使用了优惠券，以及优惠券的券号

- 特殊需求：
  
  - 无

### 31：赠送优惠券

- 名称：查看历史消费记录

- 创建者：杨承峰

- 创建日期：2019/5/10

- 最后一次更新者：杨承峰

- 更新日期：2019/6/17

- 参与者 ：影院管理人员

- 触发条件：管理员选择会员赠送特定优惠券

- 前置条件：
    - 1.管理员身份得到确认

    - 2.用户必须是会员

- 后置条件：会员得到管理员赠送的优惠券

- 优先级：中

- 正常流程：

    - 1.管理员按条件查询消费达到一定金额的会员名单
  
    - 2.管理员查询优惠券
    
    - 3.管理员选择部分会员赠送优惠券




- 扩展流程：
  
    - 1.消费不够特定金额的会员不会被展示


- 特殊需求：
  
  - 无
